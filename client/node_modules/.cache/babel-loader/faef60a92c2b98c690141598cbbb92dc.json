{"ast":null,"code":"import axios from \"axios\";\nexport function addUser({\n  name,\n  email,\n  password\n}) {\n  return function (dispatch) {\n    const user = {\n      name,\n      email,\n      password\n    };\n    axios.post('http://localhost:3001/auth/new', user).then(res => dispatch({\n      type: 'ADD_USER',\n      payload: res.data\n    })).catch(err => {\n      console.error(err);\n    });\n  };\n}\nexport function postAprobation(payload, userId) {\n  //le paso un payload ya que trae data\n  return async function (dispatch) {\n    //esta es la manera que se envia el token al backend,se obtiene desde localStorage\n    const config = {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        'Content-Type': 'application/json'\n      }\n    };\n    const res = await axios.post(\" http://localhost:3001/safe_place\", { ...payload,\n      userId\n    }, config);\n    return {\n      type: 'POST_SAFEPLACE',\n      payload: res\n    };\n  };\n}\nexport function getSafeplace() {\n  return async function (dispatch) {\n    const json = await axios.get(\"http://localhost:3001/safe_place\");\n    return dispatch({\n      type: 'GET_SAFEPLACE',\n      payload: json.data\n    });\n  };\n}\nexport function byCountrys(payload) {\n  return {\n    type: 'byCountrys',\n    payload\n  };\n}\n;\nexport function renderUserName(payload) {\n  console.log(\"entro a la action : \", payload);\n  return {\n    type: \"RENDER_USER_NAME\",\n    payload\n  };\n}\nexport function logOutGoogle(payload) {\n  return {\n    type: \"LOG_OUT_GOOGLE\",\n    payload\n  };\n}\nexport function login({\n  email,\n  password\n}) {\n  return function (dispatch) {\n    const user = {\n      email,\n      password\n    };\n    return axios.post('http://localhost:3001/auth/login', user).then(res => {\n      alert(\"Loggeado correctamente,userId,token,guardados\"); //aca guardamos el token obtenido de backend\n\n      localStorage.setItem('token', res.data.id_token);\n      return dispatch({\n        type: 'LOGIN',\n        payload: {\n          userId: res.data.userId\n        }\n      });\n    }).catch(err => {\n      alert(\"Usuario o password invalido\");\n      console.error(err);\n    });\n  };\n}\nexport const getallsafesitie = () => {\n  return function (dispatch) {\n    return axios.get(` http://localhost:3001/safe_place`).then(res => {\n      dispatch({\n        type: \"ALL_SITIES\",\n        payload: {\n          info: res.data\n        }\n      });\n    }).catch(err => {\n      console.log(\"Falla servidor local\", err);\n    });\n  };\n}; //Para filtrado por paises en el panel de Admin\n\nexport function filterByCountry(payload) {\n  return {\n    type: \"FILTER_BY_COUNTRY\",\n    payload\n  };\n}\nexport const sendMailToNewUsers = user => {\n  return async function (dispatch) {\n    try {\n      console.log(user);\n      return axios.post(`http://localhost:3001/email/welcome`, user);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/florf/Desktop/ULTIMO CLONADOOO/PF-GRUPAL/client/src/actions/actions.js"],"names":["axios","addUser","name","email","password","dispatch","user","post","then","res","type","payload","data","catch","err","console","error","postAprobation","userId","config","headers","Authorization","localStorage","getItem","getSafeplace","json","get","byCountrys","renderUserName","log","logOutGoogle","login","alert","setItem","id_token","getallsafesitie","info","filterByCountry","sendMailToNewUsers","message"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\n\r\nexport function addUser({ name, email, password }) {\r\n    return function (dispatch) {\r\n      const user = { name, email, password };\r\n      axios.post('http://localhost:3001/auth/new', user)\r\n        .then(res => dispatch({\r\n          type: 'ADD_USER',\r\n          payload: res.data\r\n        })\r\n        ).catch(err => {\r\n          console.error(err)\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n  export function postAprobation(payload,userId){ //le paso un payload ya que trae data\r\n    return async function(dispatch){\r\n//esta es la manera que se envia el token al backend,se obtiene desde localStorage\r\n      const config = {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}`, 'Content-Type': 'application/json' }\r\n      };\r\n      const res = await axios.post(\" http://localhost:3001/safe_place\" , {...payload,userId},config)\r\n      return {\r\n        type: 'POST_SAFEPLACE',\r\n        payload : res\r\n    }\r\n   }\r\n  }\r\n  export function getSafeplace(){\r\n    return async function(dispatch){\r\n      const json = await axios.get(\"http://localhost:3001/safe_place\");\r\n       return dispatch({\r\n       type: 'GET_SAFEPLACE',\r\n       payload: json.data\r\n    })\r\n  }\r\n}\r\nexport function byCountrys(payload) {\r\n  return {\r\n      type: 'byCountrys',\r\n      payload\r\n  };\r\n};\r\n\r\n\r\n  export function renderUserName(payload){\r\n    console.log(\"entro a la action : \", payload)\r\n    return {\r\n        \r\n        type: \"RENDER_USER_NAME\",\r\n        payload\r\n    }\r\n}\r\n\r\nexport function logOutGoogle(payload) {\r\n  return {\r\n    type: \"LOG_OUT_GOOGLE\",\r\n    payload\r\n  }\r\n}\r\n\r\n\r\nexport function login({ email, password }) {\r\n  return function(dispatch){\r\n  const user = {  email, password };\r\n  return axios.post('http://localhost:3001/auth/login', user)\r\n    .then(res => {\r\n      alert(\"Loggeado correctamente,userId,token,guardados\")  \r\n      //aca guardamos el token obtenido de backend\r\n      localStorage.setItem('token',res.data.id_token)\r\n      return dispatch({\r\n        type:'LOGIN',\r\n        payload:{userId:res.data.userId}\r\n      })\r\n    })\r\n    .catch(err => {\r\n        alert(\"Usuario o password invalido\")\r\n      console.error(err)\r\n    })\r\n  }\r\n}\r\nexport const getallsafesitie = ()=>{\r\n \r\n  return function(dispatch){\r\n        return axios\r\n         .get(` http://localhost:3001/safe_place`)\r\n         .then((res)=>{dispatch({ \r\n              type:\"ALL_SITIES\",\r\n              payload:{info:res.data}})\r\n         })\r\n         .catch((err) => {\r\n           console.log(\"Falla servidor local\", err);\r\n        });\r\n};\r\n}\r\n\r\n\r\n//Para filtrado por paises en el panel de Admin\r\nexport function filterByCountry(payload){\r\n  return {\r\n      type: \"FILTER_BY_COUNTRY\",\r\n      payload\r\n  }\r\n}\r\n   \r\nexport const sendMailToNewUsers = (user) => {\r\n  return async function(dispatch) {\r\n    try {\r\n      console.log(user)\r\n      return axios.post(`http://localhost:3001/email/welcome`, user)\r\n      \r\n    } catch(err) {\r\n      console.log(err.message);\r\n    }\r\n\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}