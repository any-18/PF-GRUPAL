{"ast":null,"code":"import axios from \"axios\";\nexport function addUser({\n  name,\n  email,\n  password\n}) {\n  return function (dispatch) {\n    const user = {\n      name,\n      email,\n      password\n    };\n    axios.post('http://localhost:3001/auth/new', user).then(res => dispatch({\n      type: 'ADD_USER',\n      payload: res.data\n    })).catch(err => {\n      console.error(err);\n    });\n  };\n}\nexport function postAprobation(payload, userId) {\n  //le paso un payload ya que trae data\n  return async function (dispatch) {\n    //esta es la manera que se envia el token al backend,se obtiene desde localStorage\n    const config = {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        'Content-Type': 'application/json'\n      }\n    };\n    const res = await axios.post(\" http://localhost:3001/safe_place\", { ...payload,\n      userId\n    }, config);\n    return {\n      type: 'POST_SAFEPLACE',\n      payload: res\n    };\n  };\n}\nexport function getSafeplace() {\n  return async function (dispatch) {\n    const json = await axios.get(\"http://localhost:3001/safe_place\");\n    return dispatch({\n      type: 'GET_SAFEPLACE',\n      payload: json.data\n    });\n  };\n}\nexport function byCountrys(payload) {\n  return {\n    type: 'BY_COUNTRYS',\n    payload\n  };\n}\n;\nexport function byTown(payload) {\n  return {\n    type: 'BY_TOWN',\n    payload\n  };\n}\n;\nexport function renderUserName(payload) {\n  console.log(\"entro a la action : \", payload);\n  return {\n    type: \"RENDER_USER_NAME\",\n    payload\n  };\n}\nexport function logOutGoogle(payload) {\n  return {\n    type: \"LOG_OUT_GOOGLE\",\n    payload\n  };\n}\nexport function login({\n  email,\n  password\n}) {\n  return function (dispatch) {\n    const user = {\n      email,\n      password\n    };\n    return axios.post('http://localhost:3001/auth/login', user).then(res => {\n      alert(\"Loggeado correctamente,userId,token,guardados\"); //aca guardamos el token obtenido de backend\n\n      localStorage.setItem('token', res.data.id_token);\n      return dispatch({\n        type: 'LOGIN',\n        payload: {\n          userId: res.data.userId\n        }\n      });\n    }).catch(err => {\n      alert(\"Usuario o password invalido\");\n      console.error(err);\n    });\n  };\n}\nexport const getallsafesitie = () => {\n  return function (dispatch) {\n    return axios.get(` http://localhost:3001/safe_place`).then(res => {\n      dispatch({\n        type: \"ALL_SITIES\",\n        payload: {\n          info: res.data\n        }\n      });\n    }).catch(err => {\n      console.log(\"Falla servidor local\", err);\n    });\n  };\n}; //Para filtrado por paises en el panel de Admin\n\nexport function filterByCountry(payload) {\n  return {\n    type: \"FILTER_BY_COUNTRY\",\n    payload\n  };\n}\nexport function deleteSafePlace(payload, userId) {\n  return async function (dispatch) {\n    const json = await axios.get(\"http://localhost:3001/safe_place\", { ...payload,\n      userId\n    });\n    return dispatch({\n      type: 'DELETE_SAFEPLACE',\n      payload: json.data\n    });\n  };\n}","map":{"version":3,"sources":["/home/mora/Escritorio/PF-GRUPAL/client/src/actions/actions.js"],"names":["axios","addUser","name","email","password","dispatch","user","post","then","res","type","payload","data","catch","err","console","error","postAprobation","userId","config","headers","Authorization","localStorage","getItem","getSafeplace","json","get","byCountrys","byTown","renderUserName","log","logOutGoogle","login","alert","setItem","id_token","getallsafesitie","info","filterByCountry","deleteSafePlace"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,OAAO,SAASC,OAAT,CAAiB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,KAAR;AAAeC,EAAAA;AAAf,CAAjB,EAA4C;AAC/C,SAAO,UAAUC,QAAV,EAAoB;AACzB,UAAMC,IAAI,GAAG;AAAEJ,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA;AAAf,KAAb;AACAJ,IAAAA,KAAK,CAACO,IAAN,CAAW,gCAAX,EAA6CD,IAA7C,EACGE,IADH,CACQC,GAAG,IAAIJ,QAAQ,CAAC;AACpBK,MAAAA,IAAI,EAAE,UADc;AAEpBC,MAAAA,OAAO,EAAEF,GAAG,CAACG;AAFO,KAAD,CADvB,EAKIC,KALJ,CAKUC,GAAG,IAAI;AACbC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KAPH;AAQD,GAVD;AAWD;AAGD,OAAO,SAASG,cAAT,CAAwBN,OAAxB,EAAgCO,MAAhC,EAAuC;AAAE;AAC9C,SAAO,gBAAeb,QAAf,EAAwB;AACnC;AACM,UAAMc,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAG,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B,EAAzD;AAA4D,wBAAgB;AAA5E;AADI,KAAf;AAGA,UAAMd,GAAG,GAAG,MAAMT,KAAK,CAACO,IAAN,CAAW,mCAAX,EAAiD,EAAC,GAAGI,OAAJ;AAAYO,MAAAA;AAAZ,KAAjD,EAAqEC,MAArE,CAAlB;AACA,WAAO;AACLT,MAAAA,IAAI,EAAE,gBADD;AAELC,MAAAA,OAAO,EAAGF;AAFL,KAAP;AAIF,GAVA;AAWD;AACD,OAAO,SAASe,YAAT,GAAuB;AAC5B,SAAO,gBAAenB,QAAf,EAAwB;AAC7B,UAAMoB,IAAI,GAAG,MAAMzB,KAAK,CAAC0B,GAAN,CAAU,kCAAV,CAAnB;AACC,WAAOrB,QAAQ,CAAC;AAChBK,MAAAA,IAAI,EAAE,eADU;AAEhBC,MAAAA,OAAO,EAAEc,IAAI,CAACb;AAFE,KAAD,CAAf;AAIJ,GANC;AAOH;AACD,OAAO,SAASe,UAAT,CAAoBhB,OAApB,EAA6B;AAClC,SAAO;AACHD,IAAAA,IAAI,EAAE,aADH;AAEHC,IAAAA;AAFG,GAAP;AAID;AAAA;AACD,OAAO,SAASiB,MAAT,CAAgBjB,OAAhB,EAAyB;AAC9B,SAAO;AACHD,IAAAA,IAAI,EAAE,SADH;AAEHC,IAAAA;AAFG,GAAP;AAID;AAAA;AAEC,OAAO,SAASkB,cAAT,CAAwBlB,OAAxB,EAAgC;AACrCI,EAAAA,OAAO,CAACe,GAAR,CAAY,sBAAZ,EAAoCnB,OAApC;AACA,SAAO;AAEHD,IAAAA,IAAI,EAAE,kBAFH;AAGHC,IAAAA;AAHG,GAAP;AAKH;AAED,OAAO,SAASoB,YAAT,CAAsBpB,OAAtB,EAA+B;AACpC,SAAO;AACLD,IAAAA,IAAI,EAAE,gBADD;AAELC,IAAAA;AAFK,GAAP;AAID;AAGD,OAAO,SAASqB,KAAT,CAAe;AAAE7B,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAf,EAAoC;AACzC,SAAO,UAASC,QAAT,EAAkB;AACzB,UAAMC,IAAI,GAAG;AAAGH,MAAAA,KAAH;AAAUC,MAAAA;AAAV,KAAb;AACA,WAAOJ,KAAK,CAACO,IAAN,CAAW,kCAAX,EAA+CD,IAA/C,EACJE,IADI,CACCC,GAAG,IAAI;AACXwB,MAAAA,KAAK,CAAC,+CAAD,CAAL,CADW,CAEX;;AACAX,MAAAA,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA6BzB,GAAG,CAACG,IAAJ,CAASuB,QAAtC;AACA,aAAO9B,QAAQ,CAAC;AACdK,QAAAA,IAAI,EAAC,OADS;AAEdC,QAAAA,OAAO,EAAC;AAACO,UAAAA,MAAM,EAACT,GAAG,CAACG,IAAJ,CAASM;AAAjB;AAFM,OAAD,CAAf;AAID,KATI,EAUJL,KAVI,CAUEC,GAAG,IAAI;AACVmB,MAAAA,KAAK,CAAC,6BAAD,CAAL;AACFlB,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KAbI,CAAP;AAcC,GAhBD;AAiBD;AACD,OAAO,MAAMsB,eAAe,GAAG,MAAI;AAEjC,SAAO,UAAS/B,QAAT,EAAkB;AACnB,WAAOL,KAAK,CACV0B,GADK,CACA,mCADA,EAELlB,IAFK,CAECC,GAAD,IAAO;AAACJ,MAAAA,QAAQ,CAAC;AAClBK,QAAAA,IAAI,EAAC,YADa;AAElBC,QAAAA,OAAO,EAAC;AAAC0B,UAAAA,IAAI,EAAC5B,GAAG,CAACG;AAAV;AAFU,OAAD,CAAR;AAGb,KALK,EAMLC,KANK,CAMEC,GAAD,IAAS;AACdC,MAAAA,OAAO,CAACe,GAAR,CAAY,sBAAZ,EAAoChB,GAApC;AACF,KARM,CAAP;AASP,GAVC;AAWD,CAbM,C,CAgBP;;AACA,OAAO,SAASwB,eAAT,CAAyB3B,OAAzB,EAAiC;AACtC,SAAO;AACHD,IAAAA,IAAI,EAAE,mBADH;AAEHC,IAAAA;AAFG,GAAP;AAID;AAED,OAAO,SAAS4B,eAAT,CAAyB5B,OAAzB,EAAiCO,MAAjC,EAAwC;AAC7C,SAAO,gBAAeb,QAAf,EAAwB;AAC7B,UAAMoB,IAAI,GAAG,MAAMzB,KAAK,CAAC0B,GAAN,CAAU,kCAAV,EAA+C,EAAC,GAAGf,OAAJ;AAAYO,MAAAA;AAAZ,KAA/C,CAAnB;AACA,WAAOb,QAAQ,CAAC;AACdK,MAAAA,IAAI,EAAE,kBADQ;AAEdC,MAAAA,OAAO,EAAEc,IAAI,CAACb;AAFA,KAAD,CAAf;AAID,GAND;AAOD","sourcesContent":["import axios from \"axios\";\n\n\nexport function addUser({ name, email, password }) {\n    return function (dispatch) {\n      const user = { name, email, password };\n      axios.post('http://localhost:3001/auth/new', user)\n        .then(res => dispatch({\n          type: 'ADD_USER',\n          payload: res.data\n        })\n        ).catch(err => {\n          console.error(err)\n        });\n    }\n  }\n\n\n  export function postAprobation(payload,userId){ //le paso un payload ya que trae data\n    return async function(dispatch){\n//esta es la manera que se envia el token al backend,se obtiene desde localStorage\n      const config = {\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}`, 'Content-Type': 'application/json' }\n      };\n      const res = await axios.post(\" http://localhost:3001/safe_place\" , {...payload,userId},config)\n      return {\n        type: 'POST_SAFEPLACE',\n        payload : res\n    }\n   }\n  }\n  export function getSafeplace(){\n    return async function(dispatch){\n      const json = await axios.get(\"http://localhost:3001/safe_place\");\n       return dispatch({\n       type: 'GET_SAFEPLACE',\n       payload: json.data\n    })\n  }\n}\nexport function byCountrys(payload) {\n  return {\n      type: 'BY_COUNTRYS',\n      payload\n  };\n};\nexport function byTown(payload) {\n  return {\n      type: 'BY_TOWN',\n      payload\n  };\n};\n\n  export function renderUserName(payload){\n    console.log(\"entro a la action : \", payload)\n    return {\n        \n        type: \"RENDER_USER_NAME\",\n        payload\n    }\n}\n\nexport function logOutGoogle(payload) {\n  return {\n    type: \"LOG_OUT_GOOGLE\",\n    payload\n  }\n}\n\n\nexport function login({ email, password }) {\n  return function(dispatch){\n  const user = {  email, password };\n  return axios.post('http://localhost:3001/auth/login', user)\n    .then(res => {\n      alert(\"Loggeado correctamente,userId,token,guardados\")  \n      //aca guardamos el token obtenido de backend\n      localStorage.setItem('token',res.data.id_token)\n      return dispatch({\n        type:'LOGIN',\n        payload:{userId:res.data.userId}\n      })\n    })\n    .catch(err => {\n        alert(\"Usuario o password invalido\")\n      console.error(err)\n    })\n  }\n}\nexport const getallsafesitie = ()=>{\n \n  return function(dispatch){\n        return axios\n         .get(` http://localhost:3001/safe_place`)\n         .then((res)=>{dispatch({ \n              type:\"ALL_SITIES\",\n              payload:{info:res.data}})\n         })\n         .catch((err) => {\n           console.log(\"Falla servidor local\", err);\n        });\n};\n}\n\n\n//Para filtrado por paises en el panel de Admin\nexport function filterByCountry(payload){\n  return {\n      type: \"FILTER_BY_COUNTRY\",\n      payload\n  }\n}\n   \nexport function deleteSafePlace(payload,userId){\n  return async function(dispatch){\n    const json = await axios.get(\"http://localhost:3001/safe_place\" , {...payload,userId} );\n    return dispatch({\n      type: 'DELETE_SAFEPLACE',\n      payload: json.data\n   })\n  }\n}\n\n   \n"]},"metadata":{},"sourceType":"module"}